# 消毒剂配比系统操作说明书

## 📱 系统概述

**系统名称：** 柳州市疾病预防控制中心消毒剂配比系统  
**当前版本：** V1.3.5  
**适用平台：** Android手机、网页浏览器  
**开发单位：** 柳州市疾病预防控制中心消毒与病媒生物防制所

---

## 🎯 主要功能

### 1. 配比计算
- **双模式计算**：计算稀释倍数 / 计算配制量
- **自动单位转换**：% 与 mg/L 自动换算
- **详细配制步骤**：提供具体操作指导
- **固体/液体区分**：针对不同剂型提供相应操作说明

### 2. 消毒剂数据库
- **含氯消毒剂**：84消毒液、漂白粉、次氯酸钠等
- **醇类**：95%乙醇、无水乙醇
- **过氧化物类**：过氧化氢、过氧乙酸、二氧化氯
- **季铵盐类**：苯扎溴铵、双链季铵盐
- **其他**：碘伏、碘酊、来苏儿、戊二醛

### 3. 推荐浓度数据库
包含11大消毒场景：
- 环境表面消毒
- 餐饮具消毒
- 果蔬消毒
- 织物消毒
- 手消毒
- 皮肤消毒
- 医疗器械消毒
- 空气消毒
- 疫源地消毒
- 饮用水消毒
- 污水消毒
- 冷链消毒

### 4. 传染病消毒方案
根据《中华人民共和国传染病防治法》（2025年修订）：
- **甲类传染病**（2种）：鼠疫、霍乱
- **乙类传染病**（27种）：新冠、非典、艾滋病、病毒性肝炎等
- **丙类传染病**（11种）：流感、手足口病、感染性腹泻等

### 5. 技术文件管理（V1.3.5方案一实现）
- 支持上传PDF、Word、Excel、PPT、TXT格式文件
- 文件大小限制：10MB
- **不同文件的打开方式**：
  - **TXT文本文件**：应用内直接显示内容，支持复制
  - **PDF文件**：应用内预览，支持保存
  - **Office文件**（Word/Excel/PPT）：保存到手机下载目录后用系统应用打开
- 使用Capacitor原生插件实现文件保存和打开
- 本地存储，离线可用
- **简化文件打开流程**：
  1. 点击"打开"按钮显示选择弹窗
  2. 选择"尝试用应用打开" - 使用 data URI 直接调用系统应用
  3. 或选择"下载后手动打开" - 下载文件并显示详细指引
- 本地存储，离线可用

### 6. 配比记录
- 自动保存每次计算记录
- 支持导出CSV格式
- 本地存储，数据持久化

### 7. 常用方案
- 保存常用配比方案
- 一键应用预设配置

---

## 📥 安装说明

### Android APK安装
1. 将APK文件传输到安卓手机
2. 打开APK文件
3. 允许"未知来源"安装（如提示）
4. 完成安装

**APK文件命名规则：** 消毒剂配比系统_v{版本号}.apk  
**当前版本文件：** 消毒剂配比系统_v1.3.5.apk

### 网页版使用
1. 双击`消毒剂配比计算器.html`文件
2. 使用浏览器打开
3. 支持Chrome、Safari、Edge等主流浏览器

---

## 🚀 操作指南

### 一、配比计算

#### 模式一：计算稀释倍数
1. 选择消毒剂类别
2. 选择具体消毒剂
3. 输入目标浓度和容量
4. 点击"计算"按钮
5. 查看结果和配制步骤

#### 模式二：计算配制量
1. 切换至"计算配制量"模式
2. 选择消毒剂
3. 输入目标浓度和稀释倍数
4. 点击"计算"按钮
5. 查看可配制总量

### 二、查看推荐浓度
1. 点击"推荐浓度"标签页
2. 选择消毒对象
3. 查看推荐浓度、作用时间和方法

### 三、使用传染病消毒方案
1. 点击"传染病方案"标签页
2. 选择传染病类别（甲/乙/丙类）
3. 选择具体病种
4. 查看专用消毒方案
5. 点击"应用此方案"自动填充计算器

### 四、技术文件管理（V1.3.4更新）

#### 上传文件
1. 点击"技术文件"标签页
2. 点击"选择文件"按钮
3. 支持多选文件（按住Ctrl或Cmd键，或在手机上多选）
4. 等待上传完成

#### 打开文件（V1.3.4简化）
**新流程 - 两步打开：**

1. **点击"打开"按钮**
   - 显示选择弹窗，提供两个选项：
     - 🔗 **尝试用应用打开** - 使用 data URI 直接调用手机系统应用
     - ⬇️ **下载后手动打开** - 下载文件到"下载"文件夹

2. **选择打开方式**
   - **方式一：尝试用应用打开**
     - 点击后系统会尝试用已安装的应用（WPS/Office/PDF阅读器）打开
     - 如果成功，文件将在对应应用中打开
     - 如果失败，请使用方式二
   
   - **方式二：下载后手动打开**
     - 点击后文件将下载到手机"下载"文件夹
     - 显示详细的文件位置指引：
       - 打开手机"文件管理"或"文件"应用
       - 进入"下载"文件夹
       - 找到对应文件并点击
       - 选择用相应应用打开

#### 下载文件
1. 点击"下载"按钮
2. 文件将保存到手机"下载"文件夹
3. 下载完成后会显示成功提示

#### 删除文件
1. 点击"删除"按钮
2. 确认删除操作
3. 文件将从本地存储中移除

### 五、保存和导出记录
1. 配比计算结果自动保存
2. 在"配比记录"标签页查看历史
3. 点击"导出CSV"可导出所有记录
4. 点击"清空记录"可删除所有历史

### 六、管理常用方案
1. 完成配比计算后
2. 点击"保存为常用方案"
3. 输入方案名称
4. 在"常用方案"标签页查看和一键应用

---

## 📋 数据管理

### 数据存储位置
- **Android**：应用私有存储空间
- **网页版**：浏览器LocalStorage

### 数据备份
1. 配比记录：通过"导出CSV"功能
2. 技术文件：通过"导出所有文件"功能（生成JSON备份）

### 数据恢复
1. 技术文件可通过备份JSON文件恢复
2. 配比记录需手动重新输入

### 清除数据
- **Android**：设置 → 应用 → 消毒剂配比系统 → 清除数据
- **网页版**：浏览器设置 → 清除浏览数据 → 清除LocalStorage

---

## ⚠️ 注意事项

### 消毒原则
1. **依法依规**：按GB19193-2025《传染病消毒规范》执行
2. **科学有效**：根据病原体特性选择消毒方法
3. **避免过度**：非必要不消毒，防止过度消毒
4. **安全防护**：做好个人防护，确保消毒安全

### 浓度说明
- 系统浓度值为推荐值，实际使用需根据具体情况调整
- 高浓度消毒剂需按比例稀释，避免腐蚀和残留
- 尸体消毒需使用5000-10000mg/L高浓度含氯消毒剂

### 文件管理
- 技术文件最大支持10MB
- 支持格式：PDF、DOC、DOCX、XLS、XLSX、PPT、PPTX、TXT
- 文件存储在本地，卸载应用或清除数据会丢失

### 浏览器使用
- 建议使用Chrome、Safari、Edge等主流浏览器
- 部分功能需要浏览器支持LocalStorage
- 打开文件功能可能被浏览器拦截，请允许弹窗

---

## 🔧 故障排除

### APK安装失败
- 检查是否允许"未知来源"安装
- 检查手机存储空间是否充足
- 尝试重新下载APK文件

### 网页版无法保存数据
- 检查浏览器是否开启LocalStorage
- 清除浏览器缓存后重试
- 尝试更换浏览器

### 文件上传失败
- 检查文件大小是否超过10MB
- 检查文件格式是否支持
- 检查浏览器权限设置

### 计算结果异常
- 检查输入数值是否正确
- 检查单位是否选择正确
- 重新选择消毒剂后重试

---

## 📞 技术支持

**开发单位：** 柳州市疾病预防控制中心消毒与病媒生物防制所  
**版权声明：** 未经许可不得修改或商用

---

## 📚 参考标准

1. GB19193-2025《传染病消毒规范》
2. 《中华人民共和国传染病防治法》（2025年修订）
3. WS/T 367《医疗机构消毒技术规范》
4. WS/T 797《消毒效果评价标准》

---

## 📝 版本更新记录

### V1.3.5（2026-02-15）
- ✅ 版本号更新为V1.3.5
- ✅ 方案一实现：优化手机端文件查看功能
- ✅ TXT文本文件：应用内直接显示，支持复制
- ✅ PDF文件：应用内预览，无需外部应用
- ✅ Office文件：保存到Download目录后调用系统应用打开
- ✅ 安装Capacitor原生插件：Filesystem、FileOpener、Toast
- ✅ 改进文件保存提示和打开指引

### V1.3.4（2026-02-15）
- ✅ 版本号更新为V1.3.4
- ✅ 简化文件打开方式，使用 data URI 直接调用系统应用
- ✅ 优化打开流程，提供"尝试用应用打开"和"下载后手动打开"两个选项
- ✅ 移除复杂的 Blob 转换逻辑，提升兼容性和稳定性

### V1.3.3（2026-02-15）
- ✅ 版本号更新为V1.3.3
- ✅ 优化文件打开方式，优先调用手机系统应用
- ✅ 新增文件打开选择界面，支持"用系统应用打开"和"下载后手动打开"
- ✅ 新增详细的文件位置指引，帮助用户在手机中找到下载的文件
- ✅ 改进Base64到Blob的转换，提升文件打开兼容性

### V1.3.2（2026-02-15）
- ✅ 版本号更新为V1.3.2
- ✅ 优化技术文件打开功能，支持移动端应用内预览
- ✅ PDF文件支持应用内全屏预览和打印
- ✅ TXT文件支持应用内直接显示文本内容
- ✅ Office文件提供友好的下载指引和操作说明

### V1.3.1（2026-02-15）
- ✅ 版本号显示统一为V1.3.1
- ✅ 技术文件支持直接打开功能
- ✅ 下载后可直接打开文件
- ✅ 优化文件管理界面

### V1.3.0（2026-02-15）
- ✅ 符合GB19193-2025《传染病消毒规范》标准
- ✅ 尸体消毒浓度调整：5000-10000mg/L
- ✅ 增加消毒原则说明
- ✅ 增加二氧化氯使用场景

### V1.2.0（2026-02-15）
- ✅ 修复上传进度条不消失问题
- ✅ 删除页脚个人信息
- ✅ 优化固体消毒剂显示

### V1.1（2026-02-14）
- ✅ 支持多选上传文件
- ✅ 下载后提示打开方式
- ✅ 优化固体/粉剂消毒剂显示

### V1.0.0（2026-02-14）
- ✅ 初版发布
- ✅ 配比计算功能
- ✅ 消毒剂数据库
- ✅ 传染病消毒方案

---

**文档版本：** V1.3.5  
**更新日期：** 2026年2月15日
